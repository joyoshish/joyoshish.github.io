document.addEventListener("DOMContentLoaded",(function(){function e(){c.style.display="block",setTimeout((()=>{i.focus()}),100),document.body.classList.add("search-active")}function t(){c.style.display="none",i.value="",o.innerHTML="",document.body.classList.remove("search-active")}function n(){fetch("/search_index.json").then((e=>e.json())).then((e=>{r=e,a=lunr((function(){this.field("title",{boost:10}),this.field("categories",{boost:5}),this.field("tags",{boost:5}),this.field("content"),this.ref("id"),e.forEach((function(e,t){this.add({id:t,title:e.title,categories:e.categories,tags:e.tags,content:e.content})}),this)}))})).catch((e=>console.error("Error loading search index:",e)))}const s=document.getElementById("search-button"),c=document.getElementById("search-modal"),i=document.getElementById("search-input"),d=document.getElementById("search-close"),o=document.getElementById("search-results").querySelector(".search-results-container");let a=[],r=[];document.addEventListener("keydown",(function(n){(n.ctrlKey&&"k"===n.key||"/"===n.key&&!["INPUT","TEXTAREA"].includes(document.activeElement.tagName))&&(n.preventDefault(),e()),"Escape"===n.key&&"block"===c.style.display&&t()})),s.addEventListener("click",e),d.addEventListener("click",t),window.addEventListener("click",(function(e){e.target===c&&t()})),i.addEventListener("input",(function(){const e=this.value.trim();if(!e)return void(o.innerHTML="");if(0===a.length)return void(o.innerHTML='<div class="search-result-item">Loading search index...</div>');const t=a.search(e);0!==t.length?(o.innerHTML="",t.slice(0,10).forEach((e=>{const t=r[parseInt(e.ref)],n=document.createElement("a");n.href=t.url,n.classList.add("search-result-item");const s=document.createElement("div");s.classList.add("search-result-title"),s.textContent=t.title;const c=document.createElement("div");c.classList.add("search-result-preview"),c.textContent=t.content.substring(0,150)+"...",n.appendChild(s),n.appendChild(c),o.appendChild(n)}))):o.innerHTML='<div class="search-result-item">No results found</div>'})),n()}));